\subsection{統計情報のグラフ表示} \label{sec:sd_d_gra}
統計情報によって適切なグラフやグラフの設定はさまざまである．したがって，どのよ
うなグラフが利用でき，どのようなグラフ設定ができるとよいかをユーザに対してアン
ケート調査を実施した．アンケートにご協力頂いたのは，TLVユーザであるNCES研究
員1名と名古屋大学大学院の学生1名の計2名である．「どのようなグラフでどのような統計情
報を表現したいか」という問いに対する回答をまとめたものが\tabref{gtype}
，「どのようなグラフ設定が行えるとよいか」という問いに対する回答をまとめたもの
が\tabref{gset}である．

\begin{table}[H]
\centering
\caption{問：どのようなグラフでどのような統計情報を表現したいか}
\label{gtype}
\begin{tabular}{|l|p{4zw}|p{4zw}|p{4zw}|p{4zw}|p{4zw}|p{4zw}|}
\hline
統計情報 &  円 & 縦棒 & 横棒 & 折れ線 & ヒストグラム & ろうそく
\\\hline\hline
タスクのCPU利用率 &  ○ &  &  &  &  & \\\hline
メモリアクセス率 &  ○ &  &  &  &  & \\\hline
アイドル時間 &  ○ &  &  &  &  & \\\hline
CPUの処理時間割合 &  ○ &  ○& ○ &  &  & \\\hline
タスクの合計実行時間 &   &  ○& ○ &  &  & \\\hline
タスクの実行時間分布 &   &  &  &  & ○ & \\\hline
タスクの切替回数 &   & ○ &  & \shortstack[l]{○\\(時系列)} &  & \\\hline
デッドラインミス回数 &   & ○ &  & \shortstack[l]{○\\(時系列)} &  & \\\hline
タスクの起動回数 &   & ○ &  & \shortstack[l]{○\\(時系列)} &  & \\\hline
\shortstack[l]{タスク起動要求キュー\\イング数} &   & ○ &  & \shortstack[l]{○\\(時系列) }&  & \\\hline
タスクの応答時間 &   &  &  &  & ○ & ○\\\hline
割込み禁止時間 &   &  &  &  & ○ & ○\\\hline
\shortstack{ロック獲得時間と\\獲得待ち時間} &   &  &  &  & ○ & ○\\\hline
\shortstack{セマフォ獲得時間と\\獲得待ち時間} &   &  &  &  & ○ & ○\\
\hline
\end{tabular}
\end{table}


\begin{table}[H]
\centering
\caption{問：どのようなグラフ設定が行えるとよいか}
\label{gset}
\begin{tabular}{|l|p{4zw}|p{4zw}|p{4zw}|p{4zw}|p{4zw}|p{4zw}|}
\hline
グラフ設定 &    円 & 縦棒 & 横棒 & 折れ線 & ヒストグラム & ろうそく
\\\hline\hline
タイトル &  ○ & ○ & ○ & ○ & ○ & ○\\\hline
X値のラベル &  ○ & ○ & ○ & ○ & ○ & ○\\\hline
Y値のラベル &  ○ & ○ & ○ & ○ & ○ & ○\\\hline
軸のタイトル &   & ○ & ○ & ○ & ○ & ○\\\hline
凡例 &   & ○ & ○ & ○ & ○ & ○\\\hline
グリッド線の有無 &   & ○ & ○ & ○ & ○ & ○\\\hline
目盛幅 &   & ○ & ○ & ○ & ○ & ○\\\hline
\end{tabular}
\end{table}

グラフの種類では，割合を表現する円グラフ，値比較を表現する棒グラフ，値変化を
表現する折れ線グラフ，分散を表現するヒストグラム，最小・最大・平均を表現する
グラフ\footnote{該当するグラフは複数あるので，\tabref{gtype}では仮に「ろうそく」としている}が必要なことがわかった．分布
図も候補に入れていたが，該当する統計情報は今回得られなかった．

グラフの設定では，質問する際にあらかじめ一般的な設定項目を提案して，適宜，追加
・削除を行って頂いた．しかしながら，追加も削除もされていなかったため，一般的な
設定項目があれば，問題ないということがわかった．よって，\tabref{gset}
に挙げたグラフの設定を用意することになるが，これらは次のように分類できる．
なお，設定の名前とグラフにおける反映場所についてを\figref{fig:graph}に示す．

\begin{figure}[ht]
\begin{center}
\includegraphics[scale=0.6]{graph.png}
\caption{グラフ設定の名前と反映場所}
\label{fig:graph}
\end{center}
\end{figure}

\begin{description}
\item[データポイントに依存しない設定] \mbox{} \\
タイトル，軸のタイトル，凡例，グリッド線の有無，目盛幅
\item[データポイントに依存する設定] \mbox{} \\
X値のラベル，Y値のラベル，色
\end{description}

ここで，データポイントとは，統計情報の各データのことである．よって，トレースログなどの統計情報の
ソースが異なれば，データポイントが変化する．具体的には，例えばタスクの起動回
数を求めてグラフに表示するとき，X軸にタスク1，タスク2，...と並べて表示するため
のものがX値のラベルであり，プロットされた各データポイント付近にそれぞれ求めた
回数の数字を表示するためのものがY値のラベルである．

データポイントに依存しない設定は，X値とY値がグラフごとに異なっていても，統計情
報の種類が同じであればグラフ間で異なることはない．よって，データポイ
ントに依存しない設定は，特定の統計情報をグラフ表示する際の設定テンプレートとし
て再利用することが可能である．これを実現することで，設定の冗長を防ぎ，同じ種類
の統計情報に関する統計情報生成ルールを記述する手間を軽減できる．